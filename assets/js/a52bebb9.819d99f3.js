"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1139],{3905:(n,e,t)=>{t.d(e,{Zo:()=>i,kt:()=>p});var o=t(7294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,o,a=function(n,e){if(null==n)return{};var t,o,a={},r=Object.keys(n);for(o=0;o<r.length;o++)t=r[o],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(o=0;o<r.length;o++)t=r[o],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var c=o.createContext({}),d=function(n){var e=o.useContext(c),t=e;return n&&(t="function"==typeof n?n(e):s(s({},e),n)),t},i=function(n){var e=d(n.components);return o.createElement(c.Provider,{value:e},n.children)},u="mdxType",m={inlineCode:"code",wrapper:function(n){var e=n.children;return o.createElement(o.Fragment,{},e)}},h=o.forwardRef((function(n,e){var t=n.components,a=n.mdxType,r=n.originalType,c=n.parentName,i=l(n,["components","mdxType","originalType","parentName"]),u=d(t),h=a,p=u["".concat(c,".").concat(h)]||u[h]||m[h]||r;return t?o.createElement(p,s(s({ref:e},i),{},{components:t})):o.createElement(p,s({ref:e},i))}));function p(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var r=t.length,s=new Array(r);s[0]=h;var l={};for(var c in e)hasOwnProperty.call(e,c)&&(l[c]=e[c]);l.originalType=n,l[u]="string"==typeof n?n:a,s[1]=l;for(var d=2;d<r;d++)s[d]=t[d];return o.createElement.apply(null,s)}return o.createElement.apply(null,t)}h.displayName="MDXCreateElement"},129:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var o=t(7462),a=(t(7294),t(3905));const r={sidebar_position:3},s="Rest",l={unversionedId:"node/rest",id:"node/rest",title:"Rest",description:"---",source:"@site/docs/node/rest.md",sourceDirName:"node",slug:"/node/rest",permalink:"/docs/node/rest",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Node.js",permalink:"/docs/node/learnnode"},next:{title:"Git",permalink:"/docs/category/git"}},c={},d=[{value:"AJAX\u7684\u7b80\u4ecb",id:"ajax\u7684\u7b80\u4ecb",level:2},{value:"AJAX\u7684\u4f7f\u7528",id:"ajax\u7684\u4f7f\u7528",level:2},{value:"Fetch",id:"fetch",level:2},{value:"localStorage",id:"localstorage",level:2},{value:"token",id:"token",level:2},{value:"axios",id:"axios",level:2},{value:"axios\u7684\u914d\u7f6e\u5bf9\u8c61",id:"axios\u7684\u914d\u7f6e\u5bf9\u8c61",level:3},{value:"axios\u5b9e\u4f8b",id:"axios\u5b9e\u4f8b",level:3},{value:"axios\u62e6\u622a\u5668",id:"axios\u62e6\u622a\u5668",level:3}],i={toc:d},u="wrapper";function m(n){let{components:e,...t}=n;return(0,a.kt)(u,(0,o.Z)({},i,t,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"rest"},"Rest"),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"ajax\u7684\u7b80\u4ecb"},"AJAX\u7684\u7b80\u4ecb"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        // \u70b9\u51fb\u6309\u94ae\u540e\uff0c\u5c31\u53bb\u81ea\u52a8\u53bb\u52a0\u8f7d\u670d\u52a1\u5668\u7684\u6570\u636e\n        const btn = document.getElementById("btn");\n        btn.addEventListener("click", () => {\n            // \u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\n            /* \n                \u5728js\u4e2d\u5411\u670d\u52a1\u5668\u53d1\u9001\u7684\u8bf7\u6c42\u52a0\u8f7d\u6570\u636e\u7684\u6280\u672f\u53ebAJAX\n\n                    AJAX\n                        - A \u5f02\u6b65   J JavaScript   A \u548c   X xml\n                        - \u5f02\u6b65\u7684js\u548cxml\n                        - \u5b83\u7684\u4f5c\u7528\u5c31\u662f\u901a\u8fc7js\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u6765\u52a0\u8f7d\u6570\u636e\n                        - xml\u662f\u65e9\u671fAJAX\u4f7f\u7528\u7684\u6570\u636e\u683c\u5f0f\n                            <student>\n                                <name>\u5b59\u609f\u7a7a</name>\n                            </student>\n                        - \u76ee\u524d\u6570\u636e\u683c\u5f0f\u90fd\u4f7f\u7528json\n                            {"name":"\u5b59\u609f\u7a7a"}\n\n                        - \u53ef\u4ee5\u9009\u62e9\u7684\u65b9\u6848\uff1a\n                            1.XMLHTTPRequest\uff08xhr\uff09\n                            2.Fetch\n                            3.Axios\n\n                    - CORS\uff08\u8de8\u57df\u8d44\u6e90\u5171\u4eab\uff09\n                        - \u8de8\u57df\u8bf7\u6c42\n                            - \u5982\u679c\u4e24\u4e2a\u7f51\u7ad9\u7684\u5b8c\u6574\u7684\u57df\u540d\u4e0d\u76f8\u540c\n                                a\u7f51\u7ad9\uff1ahttp://haha.com\n                                b\u7f51\u7ad9\uff1ahttp://heihei.com\n                            - \u8de8\u57df\u9700\u8981\u68c0\u67e5\u4e09\u4e2a\u4e1c\u897f\uff1a\n                                \u534f\u8bae \u57df\u540d \u7aef\u53e3\u53f7\n                                - \u4e09\u4e2a\u53ea\u8981\u6709\u4e00\u4e2a\u4e0d\u540c\uff0c\u5c31\u7b97\u8de8\u57df\n                            - \u5f53\u6211\u4eec\u901a\u8fc7AJAX\u53bb\u53d1\u9001\u8de8\u57df\u8bf7\u6c42\u65f6\uff0c\n                                \u6d4f\u89c8\u5668\u4e3a\u4e86\u670d\u52a1\u5668\u7684\u5b89\u5168\uff0c\u4f1a\u963b\u6b62JS\u8bfb\u53d6\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\n                        \n                        - \u89e3\u51b3\u65b9\u6848\n                            - \u5728\u670d\u52a1\u5668\u4e2d\u8bbe\u7f6e\u4e00\u4e2a\u5141\u8bb8\u8de8\u57df\u7684\u5934\n                                Access-Control-Allow-Origin\n                                    - \u5141\u8bb8\u90a3\u4e9b\u5ba2\u6237\u7aef\u8bbf\u95ee\u6211\u4eec\u7684\u670d\u52a1\u5668\n            */\n\n            /* \n                xhr\n                    \u521b\u5efa\u4e00\u4e2a\u65b0\u7684xhr\u5bf9\u8c61\uff0cxhr\u8868\u793a\u8bf7\u6c42\u4fe1\u606f\n            */\n            const xhr = new XMLHttpRequest();\n\n            // \u8bbe\u7f6e\u8bf7\u6c42\u7684\u4fe1\u606f\n            xhr.open("GET", "http://localhost:3000/students");\n\n            // \u53d1\u9001\u8bf7\u6c42\n            xhr.send();\n        });\n')),(0,a.kt)("p",null,"\u670d\u52a1\u5668\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'app.use((req, res, next) => {\n    /* \n        \u8bbe\u7f6e\u54cd\u5e94\u5934\n        res.setHeader("Access-Control-Allow-Origin", "*");\n        Access-Control-Allow-Origin \u8bbe\u7f6e\u6307\u5b9a\u503c\u65f6\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\uff0c\u591a\u4e2a\u53ef\u4ee5\u5728\u5916\u90e8\u521b\u5efa\u6570\u7ec4\u52a8\u6001\u8bbe\u7f6e\n\n        Access-Control-Allow-Methods \u5141\u8bb8\u7684\u8bf7\u6c42\u7684\u65b9\u5f0f\n        Access-Control-Allow-Headers \u5141\u8bb8\u4f20\u9012\u7684\u8bf7\u6c42\u5934\n    */\n    // res.setHeader("Access-Control-Allow-Origin", "http://127.0.0.1:5500");\n    res.setHeader("Access-Control-Allow-Origin", "*");\n    res.setHeader("Access-Control-Allow-Methods", "GET,POST,PUT,DELETE,PATCH");\n    res.setHeader("Access-Control-Allow-Headers", "Content-type,Authorization");\n    next();\n});\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"ajax\u7684\u4f7f\u7528"},"AJAX\u7684\u4f7f\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        const btn = document.getElementById("btn");\n        const root = document.getElementById("root");\n        btn.addEventListener("click", () => {\n            // \u521b\u5efa\u4e00\u4e2axhr\u5bf9\u8c61\n            const xhr = new XMLHttpRequest();\n\n            // \u8bbe\u7f6e\u54cd\u5e94\u4f53\u7684\u7c7b\u578b\uff0c\u8bbe\u7f6e\u540e\u4f1a\u81ea\u52a8\u5bf9\u6570\u636e\u8fdb\u884c\u8f6c\u6362\n            xhr.responseType = "json";\n\n            // \u8bbe\u7f6e\u8bf7\u6c42\u7684\u4fe1\u606f\n            xhr.open("get", "http://localhost:3000/students");\n            \n            // \u53d1\u9001\u8bf7\u6c42\n            xhr.send();\n\n            // \u53ef\u4ee5\u4e3axhr\u5bf9\u8c61\u7ed1\u5b9a\u4e00\u4e2aload\u65f6\u95f4\n            xhr.onload = () => {\n                // \u8bfb\u53d6\u54cd\u5e94\u4fe1\u606f\n                // xhr.status \u8868\u793a\u54cd\u5e94\u72b6\u6001\u7801\n                if (xhr.status === 200) {\n                    // xhr.response \u8868\u793a\u54cd\u5e94\u4fe1\u606f\n\n                    const result = xhr.response;\n                    // \u5224\u65ad\u6570\u636e\u662f\u5426\u6b63\u786e\n                    if (result.status === "ok") {\n                        // \u521b\u5efa\u4e00\u4e2aul\n                        const ul = document.createElement("ul");\n                        // \u5c06ul\u63d2\u5165\u5230root\u4e2d\n                        root.appendChild(ul);\n                        // \u904d\u5386\u6570\u636e\n                        for (const stu of result.data) {\n                            ul.insertAdjacentHTML("beforeend",\n                                `<li>${stu.id} - ${stu.name} - ${stu.age} - ${stu.gender} - ${stu.address}</li>`\n                            )\n                        }\n                    }\n                }\n            }\n        });\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"fetch"},"Fetch"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        const btn = document.getElementById("btn");\n        const root = document.getElementById("root");\n        btn.addEventListener("click", () => {\n            /* \n                fetch\n                    - fetch\u662fxhr\u7684\u5347\u7ea7\u7248\uff0c\u91c7\u7528\u7684\u662fPromise API\n                    - \u4f5c\u7528\u548cAJAX\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u4f7f\u7528\u8d77\u6765\u66f4\u52a0\u53cb\u597d\n                    - fetch\u662f\u539f\u59cbjs\u5c31\u652f\u6301\u652f\u6301\u7684\u4e00\u79cdajax\u8bf7\u6c42\u7684\u65b9\u5f0f\n            */\n            fetch("http://localhost:3000/students")\n                .then(res => {\n                    if (res.status === 200) {\n                        // res.json() \u53ef\u4ee5\u7528\u6765\u8bfb\u53d6json\u683c\u5f0f\u7684\u6570\u636e Promise\n                        return res.json();\n                    } else {\n                        throw new Error("\u8bf7\u6c42\u5931\u8d25");\n                    }\n                })\n                .then(res => {\n                    if (res.status === "ok") {\n                        // \u521b\u5efa\u4e00\u4e2atable\n                        const table = document.createElement("table");\n                        root.appendChild(table);\n                        table.insertAdjacentHTML("beforeend", "<caption>\u5b66\u751f\u5217\u8868</caption>");\n                        table.insertAdjacentHTML("beforeend", `\n                            <thead>\n                                <tr>\n                                    <th>\u5b66\u53f7</th>\n                                    <th>\u59d3\u540d</th>\n                                    <th>\u5e74\u9f84</th>\n                                    <th>\u6027\u522b</th>\n                                    <th>\u5730\u5740</th>\n                                </tr>\n                            </thead>    \n                        `);\n\n                        const tbody = document.createElement("tbody");\n                        table.appendChild(tbody);\n                        // \u904d\u5386\u6570\u7ec4\n                        for (const stu of res.data) {\n                            tbody.insertAdjacentHTML("beforeend", `\n                                <tr>\n                                    <th>${stu.id}</th>\n                                    <th>${stu.name}</th>\n                                    <th>${stu.age}</th>\n                                    <th>${stu.gender}</th>\n                                    <th>${stu.address}</th>\n                                </tr>\n                            `);\n                        }\n                    }\n                })\n                .catch((err) => console.log("\u51fa\u9519\u4e86", err));\n        });\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        const btn = document.getElementById("btn");\n        const btn2 = document.getElementById("btn2");\n        const root = document.getElementById("root");\n\n        btn2.addEventListener("click", () => {\n            fetch("http://localhost:3000/students", {\n                // \u8bf7\u6c42\u65b9\u5f0f\n                method: "post",\n\n                // \u901a\u8fc7body\u53bb\u53d1\u9001\u6570\u636e\u65f6\uff0c\u5fc5\u987b\u901a\u8fc7\u8bf7\u6c42\u5934\u6765\u6307\u5b9a\u6570\u636e\u7684\u7c7b\u578b\n                headers: {\n                    "Content-type": "application/json"\n                },\n                // \u8bf7\u6c42\u6570\u636e\n                body: JSON.stringify({ name: "\u767d\u9aa8\u7cbe", age: 16, gender: "\u5973", address: "\u767d\u9aa8\u6d1e" })\n            });\n        });\n\n        btn.addEventListener("click", () => {\n            // param\u53c2\u6570\n            fetch("http://localhost:3000/students/1") // \u76f4\u63a5\u540e\u9762\u5199id\n                .then(res => {\n                    if (res.status === 200) {\n                        return res.json();\n                    } else {\n                        throw new Error("\u8bf7\u6c42\u5931\u8d25");\n                    }\n                })\n                .then(res => {\n                    console.log(res.data);\n                })\n                .catch((err) => console.log("\u51fa\u9519\u4e86", err));\n        });\n\n        // \u70b9\u51fblogin-btn\u540e\u5b9e\u73b0\u767b\u5f55\u529f\u80fd\n        const loginBtn = document.getElementById("login-btn");\n        const root = document.getElementById("root");\n        loginBtn.addEventListener("click", () => {\n            // \u83b7\u53d6\u7528\u6237\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\n            const username = document.getElementById("username").value.trim();\n            const password = document.getElementById("password").value.trim();\n\n            // \u8c03\u7528fetch\u53d1\u9001\u8bf7\u6c42\u6765\u5b8c\u6210\u767b\u5f55\n            fetch("http://localhost:3000/login", {\n                method: "post",\n                headers: { "Content-type": "application/json" },\n                body: JSON.stringify({ username, password }),\n            }).then(res => res.json())\n                .then(res => {\n                    if (res.status !== "ok") throw new Error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");\n                    root.innerHTML = `\n                    <h1>\u6b22\u8fce ${res.data.nickname} \u56de\u6765\uff01</h1>\n                    <hr>\n                    <button id="load-btn">\u52a0\u8f7d\u6570\u636e</button>\n                    `;\n                })\n                .catch(err => {\n                    document.getElementById("info").textContent = "\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef";\n                });\n        });\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"localstorage"},"localStorage"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        const loginBtn = document.getElementById("login-btn");\n        const root = document.getElementById("root");\n\n        // \u5224\u65ad\u7528\u6237\u662f\u5426\u767b\u5f55\n        if (localStorage.getItem("nickname")) {\n            // \u7528\u6237\u5df2\u7ecf\u767b\u5f55\n            root.innerHTML = `\n                    <h1>\u6b22\u8fce ${localStorage.getItem("nickname")} \u56de\u6765\uff01</h1>\n                    <hr>\n                    <button id="load-btn" onclick="loadData()">\u52a0\u8f7d\u6570\u636e</button>\n                    <hr>\n                    <div id="data"></data>\n                    `;\n        } else {\n            loginBtn.addEventListener("click", () => {\n                const username = document.getElementById("username").value.trim();\n                const password = document.getElementById("password").value.trim();\n\n                fetch("http://localhost:3000/login", {\n                    method: "post",\n                    headers: { "Content-type": "application/json" },\n                    body: JSON.stringify({ username, password }),\n                }).then(res => res.json())\n                    .then(res => {\n                        if (res.status !== "ok") throw new Error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");\n\n                        /* \n                            \u767b\u5f55\u6210\u529f\u540e\uff0c\u9700\u8981\u4fdd\u6301\u7528\u6237\u7684\u767b\u5f55\u7684\u72b6\u6001\uff0c\u9700\u8981\u5c06\u7528\u6237\u7684\u4fe1\u606f\u5b58\u50a8\u5230\u67d0\u4e2a\u5730\u65b9\n                            \u9700\u8981\u5c06\u7528\u6237\u4fe1\u606f\u5b58\u50a8\u5230\u672c\u5730\u5b58\u50a8\n    \n                            \u6240\u8c13\u7684\u672c\u5730\u5b58\u50a8\u5c31\u662f\u6d4f\u89c8\u5668\u81ea\u8eab\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u53ef\u4ee5\u5c06\u7528\u6237\u7684\u6570\u636e\u5b58\u50a8\u5230\u6d4f\u89c8\u5668\u5185\u90e8\n                                sessionStorage \u4e2d\u5b58\u50a8\u7684\u6570\u636e \u9875\u9762\u4e00\u5173\u95ed\u5c31\u4f1a\u4e22\u5931\n                                licalStorage \u5b58\u50a8\u7684\u65f6\u95f4\u6bd4\u8f83\u957f\n                                \u767b\u5f55\u6210\u529f\uff0c\u5411\u672c\u5730\u5b58\u50a8\u4e2d\u63d2\u5165\u7528\u6237\u7684\u4fe1\u606f\n                        */\n                        localStorage.setItem("username", res.data.username);\n                        localStorage.setItem("userId", res.data.id);\n                        localStorage.setItem("nickname", res.data.nickname);\n\n                        root.innerHTML = `\n                    <h1>\u6b22\u8fce ${res.data.nickname} \u56de\u6765\uff01</h1>\n                    <hr>\n                    <button id="load-btn" onclick="loadData()">\u52a0\u8f7d\u6570\u636e</button>\n                    <hr>\n                    <div id="data"></data>\n                    `;\n                    })\n                    .catch(err => {\n                        document.getElementById("info").textContent = "\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef";\n                    });\n            });\n        }\n\n\n\n\n\n        btn01.addEventListener("click", () => {\n            // console.log(sessionStorage);\n\n            /* \n                setItem() \u7528\u6765\u5b58\u50a8\u6570\u636e\n                getItem() \u7528\u6765\u83b7\u53d6\u6570\u636e\n                removeItem() \u5220\u9664\u6570\u636e\n                clear() \u6e05\u7a7a\u6570\u636e\n            */\n            // sessionStorage.setItem("name", "\u5b59\u609f\u7a7a");\n            // sessionStorage.setItem("age", "18");\n            // sessionStorage.setItem("gender", "\u7537");\n            // sessionStorage.setItem("address", "\u82b1\u679c\u5c71");\n\n            localStorage.setItem("name", "\u5b59\u609f\u7a7a");\n            localStorage.setItem("age", "18");\n            localStorage.setItem("gender", "\u7537");\n            localStorage.setItem("address", "\u82b1\u679c\u5c71");\n        });\n\n        btn02.addEventListener("click", () => {\n            const name = localStorage.getItem("name");\n            console.log(name);\n        });\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"token"},"token"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'const jwt = require("jsonwebtoken");\n\nconst obj = {\n    name: "\u5b59\u609f\u7a7a",\n    age: 18,\n    gender: "\u7537"\n}\n\nconst token = jwt.sign(obj, "hello", {\n    expiresIn: "1h"\n});\n\ntry {\n    const decodeData = jwt.verify(token, "hello");\n\n    console.log(decodeData);\n} catch (e) {\n    // \u8bf4\u660etoken\u89e3\u7801\u5931\u8d25\n    console.log("\u65e0\u6548token");\n}\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        /* \n            \u95ee\u9898\uff1a\n                - \u73b0\u5728\u662f\u95ee\u9898\u4ee5\u540e\u76f4\u63a5\u5c06\u7528\u6237\u4fe1\u606f\u5b58\u50a8\u5230\u4e86localStorage\n                - \u4e3b\u8981\u5b58\u5728\u4e24\u4e2a\u95ee\u9898\uff1a\n                    1.\u6570\u636e\u5b89\u5168\u95ee\u9898\n                    2.\u670d\u52a1\u5668\u4e0d\u77e5\u9053\u4f60\u6709\u6ca1\u6709\u767b\u5f55\n                - \u89e3\u51b3\u95ee\u9898\uff1a\n                    \u5982\u4f55\u544a\u8bc9\u670d\u52a1\u5668\u5ba2\u6237\u7aef\u7684\u767b\u5f55\u72b6\u6001\n                        - rest\u98ce\u683c\u7684\u670d\u52a1\u5668\u662f\u65e0\u72b6\u6001\u7684\u670d\u52a1\u5668\uff0c\u6240\u4ee5\u6ce8\u610f\u4e0d\u8981\u518d\u670d\u52a1\u5668\u4e2d\u5b58\u50a8\u7528\u6237\u7684\u6570\u636e\n                        - \u670d\u52a1\u5668\u4e2d\u4e0d\u80fd\u5b58\u50a8\u7528\u6237\u4fe1\u606f\uff0c\u53ef\u4ee5\u5c06\u7528\u6237\u4fe1\u606f\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u4fdd\u5b58\n                            \u6bd4\u5982\uff1a{id:"xxx", username:"xxx", email:"xxx"}\n                            \u5ba2\u6237\u7aef\u6bcf\u6b21\u8bbf\u95ee\u670d\u52a1\u5668\u65f6\uff0c\u76f4\u63a5\u5c06\u7528\u6237\u4fe1\u606f\u53d1\u56de\uff0c\u670d\u52a1\u5668\u5c31\u53ef\u4ee5\u6839\u636e\u7528\u6237\u4fe1\u606f\u6765\u8bc6\u522b\u7528\u6237\u7684\u8eab\u4efd\n                        - \u4f46\u662f\u5982\u679c\u5c06\u6570\u636e\u76f4\u63a5\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u540c\u6837\u4f1a\u6709\u6570\u636e\u5b89\u5168\u7684\u95ee\u9898\uff0c\n                            \u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\uff0c\u52a0\u5bc6\u4ee5\u540e\u518d\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u4fdd\u5b58\uff0c\u8fd9\u6837\u5373\u53ef\u907f\u514d\u6570\u636e\u7684\u6cc4\u9732\n                        - \u5728node\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528jsonwebtoken\u8fd9\u4e2a\u5305\u6765\u5bf9\u6570\u636e\u8fdb\u884c\u52a0\u5bc6\n                            jsonwebtoken(jwt) -> \u901a\u8fc7\u5bf9json\u52a0\u5bc6\u540e\uff0c\u751f\u6210\u4e00\u4e2aweb\u4e2d\u4f7f\u7528\u7684\u4ee4\u724c\n                        - \u4f7f\u7528\u6b65\u9aa4\uff1a\n                            1.\u5b89\u88c5\n                                yarn add jsonwebtoken\n        */\n        const loginBtn = document.getElementById("login-btn");\n        const root = document.getElementById("root");\n\n        function loadData() {\n\n            // \u5f53\u6211\u4eec\u8bbf\u95ee\u7684\u662f\u9700\u8981\u6743\u9650\u7684api\u65f6\u3002\u5fc5\u987b\u5728\u8bf7\u6c42\u4e2d\u9644\u52a0\u6743\u9650\u7684\u4fe1\u606f\n            // token \u4e00\u822c\u90fd\u662f\u901a\u8fc7\u8bf7\u6c42\u5934\u6765\u53d1\u9001\n            const token = localStorage.getItem("token");\n            fetch("http://localhost:3000/students", {\n                headers: {\n                    // "Bearer xxxxx"\n                    "authorization": "Bearer " + token\n                }\n            })\n                .then(res => {\n                    if (res.status === 200) {\n                        // res.json() \u53ef\u4ee5\u7528\u6765\u8bfb\u53d6json\u683c\u5f0f\u7684\u6570\u636e Promise\n                        return res.json();\n                    } else {\n                        throw new Error("\u8bf7\u6c42\u5931\u8d25");\n                    }\n                })\n                .then(res => {\n                    if (res.status === "ok") {\n                        // \u521b\u5efa\u4e00\u4e2atable\n                        const dataDiv = document.getElementById("data");\n                        const table = document.createElement("table");\n                        dataDiv.appendChild(table);\n                        table.insertAdjacentHTML("beforeend", "<caption>\u5b66\u751f\u5217\u8868</caption>");\n                        table.insertAdjacentHTML("beforeend", `\n                            <thead>\n                                <tr>\n                                    <th>\u5b66\u53f7</th>\n                                    <th>\u59d3\u540d</th>\n                                    <th>\u5e74\u9f84</th>\n                                    <th>\u6027\u522b</th>\n                                    <th>\u5730\u5740</th>\n                                </tr>\n                            </thead>    \n                        `);\n\n                        const tbody = document.createElement("tbody");\n                        table.appendChild(tbody);\n                        // \u904d\u5386\u6570\u7ec4\n                        for (const stu of res.data) {\n                            tbody.insertAdjacentHTML("beforeend", `\n                                <tr>\n                                    <th>${stu.id}</th>\n                                    <th>${stu.name}</th>\n                                    <th>${stu.age}</th>\n                                    <th>${stu.gender}</th>\n                                    <th>${stu.address}</th>\n                                </tr>\n                            `);\n                        }\n                    }\n                })\n                .catch((err) => console.log("\u51fa\u9519\u4e86", err));\n        }\n\n        // \u5224\u65ad\u7528\u6237\u662f\u5426\u767b\u5f55\n        if (localStorage.getItem("nickname")) {\n            // \u7528\u6237\u5df2\u7ecf\u767b\u5f55\n            root.innerHTML = `\n                    <h1>\u6b22\u8fce ${localStorage.getItem("nickname")} \u56de\u6765\uff01</h1>\n                    <hr>\n                    <button id="load-btn" onclick="loadData()">\u52a0\u8f7d\u6570\u636e</button>\n                    <button onclick="localStorage.clear()">\u6ce8\u9500</button>\n                    <hr>\n                    <div id="data"></data>\n                    `;\n        } else {\n            loginBtn.addEventListener("click", () => {\n                const username = document.getElementById("username").value.trim();\n                const password = document.getElementById("password").value.trim();\n\n                fetch("http://localhost:3000/login", {\n                    method: "post",\n                    headers: { "Content-type": "application/json" },\n                    body: JSON.stringify({ username, password }),\n                }).then(res => res.json())\n                    .then(res => {\n                        if (res.status !== "ok") throw new Error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");\n\n                        localStorage.setItem("token", res.data.token);\n                        localStorage.setItem("nickname", res.data.nickname);\n\n                        root.innerHTML = `\n                    <h1>\u6b22\u8fce ${res.data.nickname} \u56de\u6765\uff01</h1>\n                    <hr>\n                    <button id="load-btn" onclick="loadData()">\u52a0\u8f7d\u6570\u636e</button>\n                    <button onclick="localStorage.clear()">\u6ce8\u9500</button>\n                    <hr>\n                    <div id="data"></data>\n                    `;\n                    })\n                    .catch(err => {\n                        document.getElementById("info").textContent = "\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef";\n                    });\n            });\n        }\n')),(0,a.kt)("p",null,"\u670d\u52a1\u5668\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'const express = require("express");\n// \u5f15\u5165jwt\nconst jwt = require("jsonwebtoken");\nconst app = express();\n\napp.use(express.urlencoded({ extended: true }));\n// \u89e3\u6790json\u683c\u5f0f\u8bf7\u6c42\u4f53\u7684\u4e2d\u95f4\u4ef6\napp.use(express.json());\n\napp.use((req, res, next) => {\n    res.setHeader("Access-Control-Allow-Origin", "*");\n    res.setHeader("Access-Control-Allow-Methods", "GET,POST,PUT,DELETE,PATCH");\n    res.setHeader("Access-Control-Allow-Headers", "Content-type,Authorization");\n    next();\n});\n\n// \u5b9a\u4e49\u4e00\u4e2a\u767b\u5f55\u7684\u8def\u7531\napp.post("/login", (req, res) => {\n    // \u83b7\u53d6\u7528\u6237\u8f93\u5165\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\n    const { username, password } = req.body;\n    // \u9a8c\u8bc1\u7528\u6237\u540d\u548c\u5bc6\u7801\n    if (username === "admin" && password === "123123") {\n        // \u767b\u5f55\u6210\u529f\uff0c\u751f\u6210token\n        const token = jwt.sign({ id: "12345", username: "admin", nickname: "\u8d85\u7ea7\u7ba1\u7406\u5458" }, "hello", {\n            expiresIn: "1d"\n        });\n        res.send({\n            status: "ok",\n            data: { token, nickname: "\u8d85\u7ea7\u7ba1\u7406\u5458" }\n        });\n    } else {\n        // \u767b\u5f55\u5931\u8d25\n        res.status(403).send({\n            status: "error",\n            data: "\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"\n        });\n    }\n});\n\n// \u7edf\u4e00\u7684api\n// \u5b9a\u4e49\u5b66\u751f\u4fe1\u606f\u76f8\u5173\u7684\u8def\u7531\napp.get("/students", (req, res) => {\n\n    try {\n        // \u8fd9\u4e2a\u8def\u7531\u5fc5\u987b\u5728\u7528\u6237\u767b\u5f55\u540e\u624d\u80fd\u8bbf\u95ee\n        // \u9700\u8981\u68c0\u67e5\u7528\u6237\u662f\u5426\u767b\u5f55\n        // \u8bfb\u53d6\u8bf7\u6c42\u5934\n        const token = req.get("Authorization").split(" ")[1];\n\n        // \u5bf9token\u8fdb\u884c\u89e3\u7801\n        const decodeToken = jwt.verify(token, "hello");\n        // console.log(decodeToken);\n        // \u89e3\u7801\u6210\u529f\uff0ctoken\u6709\u6548\n        // \u8fd4\u56de\u5b66\u751f\u4fe1\u606f\n        res.send({\n            status: "ok",\n            data: STU_ARR\n        });\n    } catch (e) {\n        // \u89e3\u7801\u9519\u8bef\uff0c\u7528\u6237token\u65e0\u6548\n        res.status(403).send({\n            status: "ok",\n            data: "token\u65e0\u6548"\n        });\n    }\n});\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        // \u83b7\u53d6\u6309\u94ae\n        const btn01 = document.getElementById("btn01");\n        const btn02 = document.getElementById("btn02");\n        const btn03 = document.getElementById("btn03");\n        let controller;\n\n        btn01.onclick = () => {\n            // \u7ec8\u6b62\u8bf7\u6c42\n            // \u521b\u5efa\u4e00\u4e2aAbortController\n            controller = new AbortController();\n            // setTimeout(() => {\n            //     controller.abort();\n            // }, 3000);\n            // \u70b9\u51fb\u6309\u94ae\u5411test\u53d1\u9001\u8bf7\u6c42\n            fetch("http://localhost:3000/test", {\n                signal: controller.signal\n            })\n                .then(res => console.log(res))\n                .catch(err => console.log(err));\n        }\n\n        btn02.onclick = () => {\n            controller && controller.abort();\n        }\n\n        btn03.onclick = async () => {\n            // \u6ce8\u610f\uff1a\u5c06promise\u6539\u5199\u4e3aawait\u65f6\uff0c\u4e00\u5b9a\u8981\u5199try-catch\n            try {\n                const res = await fetch("http://localhost:3000/students");\n                const data = await res.json();\n                console.log(data);\n\n            } catch (e) {\n                console.log("\u51fa\u9519\u4e86", e);\n            }\n        }\n')),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"axios"},"axios"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        document.getElementById("btn1").onclick = () => {\n            // \u76f4\u63a5\u8c03\u7528axios\u53d1\u9001\u8bf7\u6c42\n            axios({\n                method: "post",\n                url: "http://localhost:3000/students",\n                data: {\n                    name: "\u5510\u50e7",\n                    age: 18,\n                    gender: "\u7537",\n                    address: "\u5973\u513f\u56fd"\n                }\n                // data:"name=swk&age=18"\n            }).then(res => console.log(res.data))\n                .catch(e => console.log("\u51fa\u9519\u4e86", e));\n        }\n\n        document.getElementById("btn2").onclick = () => {\n            // \u76f4\u63a5\u8c03\u7528axios\u53d1\u9001\u8bf7\u6c42\n            axios({\n                method: "get",\n                url: "http://localhost:3000/students"\n            }).then(res => console.log(res.data)) // axios\u9ed8\u8ba4\u53ea\u4f1a\u5728\u54cd\u5e94\u72b6\u6001\u4e3a2xx\u65f6\u624d\u4f1a\u8c03\u7528then\n                .catch(e => console.log("\u51fa\u9519\u4e86", e));\n        }\n')),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"axios\u7684\u914d\u7f6e\u5bf9\u8c61"},"axios\u7684\u914d\u7f6e\u5bf9\u8c61"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        document.getElementById("btn1").onclick = () => {\n            // \u76f4\u63a5\u8c03\u7528axios\u53d1\u9001\u8bf7\u6c42\n            axios({\n                // baseURL \u6307\u5b9a\u670d\u52a1\u5668\u7684\u6839\u76ee\u5f55\uff08\u8def\u5f84\u7684\u524d\u7f00\uff09\n                baseURL: "http://localhost:3000",\n\n                // \u8bf7\u6c42\u5730\u5740\n                url: "students",\n\n                // \u8bf7\u6c42\u65b9\u6cd5\uff0c\u9ed8\u8ba4\u662fget\n                method: "post",\n\n                // \u6307\u5b9a\u8bf7\u6c42\u5934 \n                // headers:{"Content-Type":"application/json"} // \u9ed8\u8ba4\n\n                // \u8bf7\u6c42\u4f53\n                // data:"name=swk&age=16\n                data: {\n                    name: "\u5510\u50e7",\n                    age: 18,\n                    gender: "\u7537",\n                    address: "\u5973\u513f\u56fd"\n                },\n\n                // params \u7528\u6765\u6307\u5b9a\u8def\u5f84\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\n                params: {\n                    id: 1,\n                    name: "swk"\n                },\n\n                // timeout \u8fc7\u671f\u65f6\u95f4\n                timeout: 1000,\n\n                // \u7528\u6765\u7ec8\u6b62\u8bf7\u6c42\n                // signal\n\n                // transformRequest \u53ef\u4ee5\u7528\u6765\u5904\u7406\u8bf7\u6c42\u6570\u636e\uff08data\uff09\n                // \u5b83\u9700\u8981\u4e00\u4e2a\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0c\u6570\u7ec4\u53ef\u4ee5\u63a5\u53d7\u591a\u4e2a\u51fd\u6570\uff0c\u8bf7\u6c42\u53d1\u9001\u65f6\u591a\u4e2a\u51fd\u6570\u4f1a\u6309\u7167\u987a\u5e8f\u6267\u884c\n                // \u51fd\u6570\u5728\u6267\u884c\u65f6\uff0c\u4f1a\u63a5\u6536\u5230\u4e24\u4e2a\u53c2\u6570data\u548cheaders\n                transformRequest: [function (data, headers) {\n                    // \u53ef\u4ee5\u5728\u51fd\u6570\u4e2d\u5bf9data\u548cheaders\u8fdb\u884c\u4fee\u6539\n                    data.name = "\u732a\u516b\u6212";\n                    headers["Content-Type"] = "application/json";\n                    return data;\n                }, function (data, headers) {\n                    // console.log(1111, data, headers);\n                    // \u6700\u540e\u4e00\u4e2a\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u624d\u80fd\u4f7f\u5f97\u6570\u636e\u6709\u6548\n                    return JSON.stringify(data);\n                }]\n            }).then(res => console.log(res.data))\n                .catch(e => console.log("\u51fa\u9519\u4e86", e));\n        }\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        axios.defaults.baseURL = "http://localhost:3000";\n        axios.defaults.headers.common[\'Authorization\'] = "Bearer " + localStorage.getItem("token");\n\n        document.getElementById("btn1").onclick = () => {\n            // \u76f4\u63a5\u8c03\u7528axios\u53d1\u9001\u8bf7\u6c42\n            axios({\n                url: "students",\n                method: "post",\n\n                data: {\n                    name: "\u5510\u50e7",\n                    age: 18,\n                    gender: "\u7537",\n                    address: "\u5973\u513f\u56fd"\n                },\n\n                // timeout \u8fc7\u671f\u65f6\u95f4\n                timeout: 1000\n            }).then(res => console.log(res.data))\n                .catch(e => console.log("\u51fa\u9519\u4e86", e));\n        }\n')),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"axios\u5b9e\u4f8b"},"axios\u5b9e\u4f8b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        axios.defaults.baseURL = "http://localhost:3000";\n        axios.defaults.headers.common[\'Authorization\'] = "Bearer " + localStorage.getItem("token");\n\n        /* \n            axios\u5b9e\u4f8b\u76f8\u5f53\u4e8e\u662faxios\u7684\u4e00\u4e2a\u526f\u672c\n            axios\u7684\u9ed8\u8ba4\u914d\u7f6e\u5728\u5b9e\u4f8b\u4e5f\u540c\u6837\u4f1a\u751f\u6548\n            \u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u5355\u72ec\u4fee\u6539axios\u5b9e\u4f8b\u7684\u9ed8\u8ba4\u914d\u7f6e\n        */\n        const instance = axios.create({\n            baseURL: "http://localhost:4000"\n        });\n\n        document.getElementById("btn1").onclick = () => {\n            instance.get("stduents")\n                .then(res => console.log(res.data))\n                .catch((e) => console.log("\u51fa\u9519\u4e86", e));\n        }\n')),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"axios\u62e6\u622a\u5668"},"axios\u62e6\u622a\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'        axios.defaults.baseURL = "http://localhost:3000";\n\n        /* \n            axios\u7684\u62e6\u622a\u5668\u53ef\u4ee5\u5bf9\u8bf7\u6c42\u6216\u54cd\u5e94\u8fdb\u884c\u62e6\u622a\uff0c\u5728\u8bf7\u6c42\u53d1\u9001\u524d\u6216\u54cd\u5e94\u8bfb\u53d6\u524d\u5904\u7406\u6570\u636e\n            \u62e6\u622a\u5668\u53ea\u5bf9\u5f53\u524d\u5b9e\u4f8b\u6709\u6548\n        */\n        // \u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668\n        axios.interceptors.request.use(function (config) {\n            // \u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\u505a\u4e9b\u4ec0\u4e48\n            // \u62e6\u622a\u5668\u6267\u884c\u4e86\n            // config.data.name = "\u732a";\n\n            config.headers[\'Authorization\'] = "Bearer " + localStorage.getItem("token");\n\n            return config;\n        }, function (error) {\n            // \u5bf9\u8bf7\u6c42\u9519\u8bef\u505a\u4e9b\u4ec0\u4e48\n            return Promise.reject(error);\n        });\n\n        // \u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668\n        axios.interceptors.response.use(function (response) {\n            // 2xx \u8303\u56f4\u5185\u7684\u72b6\u6001\u7801\u90fd\u4f1a\u89e6\u53d1\u8be5\u51fd\u6570\u3002\n            // \u5bf9\u54cd\u5e94\u6570\u636e\u505a\u70b9\u4ec0\u4e48\n            return response;\n        }, function (error) {\n            // \u8d85\u51fa 2xx \u8303\u56f4\u7684\u72b6\u6001\u7801\u90fd\u4f1a\u89e6\u53d1\u8be5\u51fd\u6570\u3002\n            // \u5bf9\u54cd\u5e94\u9519\u8bef\u505a\u70b9\u4ec0\u4e48\n            return Promise.reject(error);\n        });\n\n        document.getElementById("btn1").onclick = () => {\n            axios({\n                url: "students",\n                method: "post",\n                data: { name: "\u732a\u516b\u6212" }\n            })\n                .then(res => console.log(res.data))\n                .catch((e) => console.log("\u51fa\u9519\u4e86", e));\n        }\n')))}m.isMDXComponent=!0}}]);